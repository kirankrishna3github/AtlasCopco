*&---------------------------------------------------------------------*
*&  Include           ZERO2MASTER_ANDA_02B_FUNC
*&---------------------------------------------------------------------*
*&---------------------------------------------------------------------*
*&      Form  F_02B
*&---------------------------------------------------------------------*
*       text
*----------------------------------------------------------------------*
*  -->  p1        text
*  <--  p2        text
*----------------------------------------------------------------------*
FORM F_02B .
*  demo program: DEMO_REGEX_TOY
*http://jingpin.jikexueyuan.com/article/20447.html
*https://wenku.baidu.com/view/64f9691810a6f524ccbf8516.html

*----------------------------------------------------------------------*
*  正则表达式语法
*  []   [XYZ]表示范围内一位字符
*  {}   [XYZ]{N}组合，表示[]范围内N位字符
*  ?    匹配表达式0次或者1次，相当于 {0,1}，
*       比如："a[cd]?"可以匹配 "a","ac","ad"
*  +    表达式至少出现1次，相当于 {1,}
*  [^ ] 排除，如[^ab]: 表示 a,b 以外的任何一个字符
*  *   表达式不出现或出现任意次，相当于 {0,}
*  \   转意字符: 一些不便书写的字符，采用在前面加 "\" 的方法
*  \d  任意数字 0 ~ 9
*  \w 表示任意一个字母或数字或下划线,即 “A~Z,a~z,0~9,_ ”
*  \s  包括空格、制表符、换页符等空白字符的其中任意一个
*  .  小数点可以匹配除了换行符（\n）以外的任意一个字符
*  \Q...\E 中间的字符作为普通字符,如"\Qsdfs\w\d\E" = "sdfs\w\d"
*  [a-z] a到z之间的任何一个字符， “-”表示范围区间
* ^   与字符串开始的地方匹配，不匹配任何字符
*$  与字符串结束的地方匹配，不匹配任何字符
*\b 匹配一个单词边界，也就是单词和空格之间的位置，不匹配任何字符
* | 左右两边表达式之间 "或" 关系，匹配左边或者右边
*( ) (1). 在被修饰匹配次数的时候，括号中的表达式可以作为整体被修饰
*    (2). 取匹配结果的时候，括号中的表达式匹配到的内容可以被单独得到
*(?:  ) 匹配pattern但不获取匹配结果，也就是说这是一个非获取匹配，
*        不进行存储供以后使用。
*----------------------------------------------------------------------*

*----------------------------------------------------------------------*
*   POSIX 字符集合
*[:alnum:] 任何一个字母或数字（A - Z, a - z, 0 - 9）
*[:alpha:] 任何一个字母（A - Z, a - z）
*[:cntrl:] 任何一个控制字符（\x00 C \x1F, \x7F）
*[:digit:] 任何一个数字（0 C 9）
*[:space:] 任何一个空白字符（\x09 C \x0D, \x20）
*[:graph:] 任何一个可显示的 ASCII 字符，不包含空格
*[:lower:] 任何一个小写字母（a C z）
*[:upper:] 任何一个大写字母（A C Z）
*[:punct:] 可显示字符 [:print:] 中除去字母数字 [:alnum:]
*[:blank:] 空格或者制表符（\x20, \x09）
*----------------------------------------------------------------------*

*----------------------------------------------------------------------*
* URL http://blog.csdn.net/sapmatinal/article/details/42644679
*  正则表达式模板
*  1.匹配中文字符的正则表达式： [u4e00-u9fa5]
*  2.匹配双字节字符(包括汉字在内)：[^x00-xff]
*  评注：可以用来计算字符串的长度（一个双字节字符长度计2，ASCII字符计1）
*  3. 匹配空白行的正则表达式：ns*r
*   评注：可以用来删除空白行
*  4. 匹配首尾空白字符的正则表达式：^s*|s*$
*评注：可以用来删除行首行尾的空白字符(包括空格、制表符、换页符等等)
* 5. 匹配Email地址的正则表达式：w+([-+.]w+)*@w+([-.]w+)*.w+([-.]w+)*
* 6.匹配网址URL的正则表达式：[a-zA-z]+://[^s]*
*  7. ^[a-zA-Z][a-zA-Z0-9_]{4,15}$
*匹配帐号是否合法(字母开头，允许5-16字节，允许字母数字下划线)
*----------------------------------------------------------------------*

* 以1开头，3或5或7或8为第二位，接着9位数字的数字串
  IF cl_abap_matcher=>matches( pattern = '1[357-8][0-9]{9}'
                              text = 02b_p1 ) = abap_true.
    WRITE: '有效号码', /.
  ELSE.
    WRITE: '无效号码' , /.
  ENDIF.

*  IF sy-subrc = 0.
*    message s001(00) DISPLAY LIKE 'E' WITH 'COME ON BABY'.
*    LEAVE LIST-PROCESSING.
*  ENDIF.

*   + 多个
*  IF cl_abap_matcher=>matches( pattern = '[0-9]+'
*                              text = p_numb ) = abap_true.
*    CONCATENATE '''' p_numb INTO p_numb.
*    WRITE: '有效数字',p_numb.
*  ELSE.
*    WRITE: '无效数字' , p_numb.
*  ENDIF.


*   中国移动：China Mobile
*   134[0-8],135,136,137,138,139,150,151,157,158,159,182,187,188
  IF cl_abap_matcher=>matches(
      pattern = '1((3[5-9]|5[0179]|8[27-8])[0-9]|34[0-8])[0-9]{7}'
      text = 02b_p1 ) = abap_true.
    WRITE: '中国移动'.

*   中国联通：China Unicom
*   130,131,132,152,155,156,185,186
  ELSEIF cl_abap_matcher=>matches( pattern = '1(3[0-2]|5[256]|8[5-6])[0-9]{8}'
                              text = 02b_p1 ) = abap_true.
    WRITE: '中国联通'.

*   中国电信：China Telecom
*   133,1349,153,180,189
  ELSEIF cl_abap_matcher=>matches( pattern = '1((33|53|80|89)[0-9]|349)[0-9]{7}'
                              text = 02b_p1 ) = abap_true.
    WRITE: '中国电信'.
  ENDIF.
*2, Replace
*COUNT = MATCHER->REPLACE_ALL( NEWTEXT = W_NEWTEXT ).
*3. Find
*  MATCHES = MATCHER->FIND_ALL( ).

ENDFORM.                    " F_02B
