*&---------------------------------------------------------------------*
*&  Include           YSE_SD_KP03_RPT_TOP                              *
*&---------------------------------------------------------------------*
***************************************************************************
*data declarations
***************************************************************************
DATA: OK_CODE TYPE SYUCOMM,
      GV_SUBRC TYPE SYSUBRC.

*RANGES:
*        R_PRDHA FOR MARA-PRDHA.



DATA:     MY_CONTAINER TYPE REF TO CL_GUI_DOCKING_CONTAINER,
          MY_ALV TYPE REF TO CL_GUI_ALV_GRID.

DATA: LS_VARIANT TYPE DISVARIANT,
      LS_LAYOUT TYPE LVC_S_LAYO,
      LT_FIELDCAT TYPE LVC_T_FCAT,
      LS_FIELDCAT LIKE LINE OF LT_FIELDCAT,
      LT_SORT TYPE LVC_T_SORT,
      LS_SORT LIKE LINE OF LT_SORT,
*      gv_gac(4)    TYPE c,
*      gv_pgc(4)    TYPE c,
      LV_ADDR_SEL  TYPE ADDR1_SEL,
      LV_SADR      TYPE SADR.

* report output table
DATA:
  IT_OUT  TYPE YSE_SD_KP04_OUTPUT OCCURS 0 WITH HEADER LINE.

* TYPE-POOLS *
TYPE-POOLS SLIS.


**internal table
*data:
*it_t179 TYPE t179               OCCURS 0,
*wa_t179 TYPE t179,
*  it_pgc      TYPE TABLE OF yse_pgc_gac WITH HEADER LINE.

* FIELD-SYMBOLS * check
*FIELD-SYMBOLS: <fieldcat> TYPE lvc_s_fcat.


* WORKING AREA'S *
DATA:
  GS_LAYOUT       TYPE LVC_S_LAYO.

* INTERNAL TABLES

*DATA: BEGIN OF GT_EHRSK OCCURS 0,
*        SELIN(1) TYPE C.
*        INCLUDE STRUCTURE YSE_RENT_EHRSK_OUTPUT.
*        INCLUDE STRUCTURE YSE_RENT_EHRSBD_OUTPUT.
*data:  check
*      IT_FIELDCAT TYPE LVC_T_FCAT,
*      GT_ROWS        TYPE LVC_T_ROW.    " Table Selected Rows ALV Grid

* Internal tables for triggering "CALL TRANSACTION"s
*CHECK
*      IT_BDCDATA       LIKE BDCDATA    OCCURS 0 WITH HEADER LINE,
*      IT_BDCMSGS       LIKE BDCMSGCOLL OCCURS 0 WITH HEADER LINE.


* OBJECT VARIABLES *
DATA : OBJ_CONT_ORDLIN       TYPE REF TO CL_GUI_CUSTOM_CONTAINER,
       OBJ_ALV_ORDLIN        TYPE REF TO CL_GUI_ALV_GRID,
       OBJ_EVENT_HNDL_ORDLIN TYPE REF TO LCL_EVENT_HANDLER.

* VARIOUS VARIABLES *
DATA:  OKCODE          TYPE SYUCOMM.




* Tables need to be selected
TABLES:
      VBAK,
      VBUK,
      VBAP,
      MKPF,
      MSEG,
      MARA,
      AUFK,
      RESB,
      YSE_EM_PLANT,
      QMEL.

*internal tables
* internal table contains data related to sales documents & material
DATA:
      BEGIN OF IT_VBAP OCCURS 0,
          VBELN LIKE  VBAP-VBELN,
          POSNR LIKE  VBAP-POSNR,
          WERKS LIKE  VBAP-WERKS,
          MATNR LIKE  VBAP-MATNR,
          MATKL LIKE  VBAP-MATKL,
          MTART LIKE  MARA-MTART,
          PRDHA LIKE  MARA-PRDHA,
          WHTYPE LIKE YSE_EM_PLANT-WHTYPE,
          MTPOS  LIKE  MVKE-MTPOS,
          MVGR4  LIKE  MVKE-MVGR4,
      END OF IT_VBAP.
* internal table contains data related to sales org., credit block, order reason
DATA:

      BEGIN OF IT_VBAK OCCURS 0,
          VBELN TYPE VBAK-VBELN,
          AUART LIKE  VBAK-AUART,
          VKORG LIKE  VBAK-VKORG,
          VTWEG LIKE  VBAK-VTWEG,
          AUGRU LIKE VBAK-AUGRU,
          POSNR LIKE VBAP-POSNR,
          WERKS LIKE VBAP-WERKS,
          MATNR LIKE VBAP-MATNR,
          MATKL LIKE VBAP-MATKL,
          PRODH LIKE VBAP-PRODH,
          BWTAR LIKE VBAP-BWTAR,
          LGORT LIKE VBAP-LGORT,
          WHTYPE LIKE YSE_EM_PLANT-WHTYPE,
          WAERS LIKE T001-WAERS,
          CMGST LIKE VBUK-CMGST,
          LFGSA LIKE VBUP-LFGSA,
          LSSTK LIKE VBUK-LSSTK,
*         FSSTA LIKE VBUP-FSSTA,                          "DUD080310
          FSSTK LIKE VBUK-FSSTK,                            "DUD080310
          VSBED LIKE VBAK-VSBED,
          KUNNR LIKE VBAK-KUNNR,
          VKBUR LIKE VBAK-VKBUR,
          VKGRP LIKE VBAK-VKGRP,
          KVGR4 LIKE VBAK-KVGR4,                          "+Mod-002 (Satya)
          ERNAM LIKE VBAK-ERNAM,                          "+Mod-003 (Satya)
          PSTYV LIKE VBAP-PSTYV,                          "+Mod-005 (Nanda)
      END OF IT_VBAK.

* internal table contains reservations items data
DATA:

      BEGIN OF IT_RESB OCCURS 0,
          RSNUM LIKE  RESB-RSNUM,
          RSPOS LIKE  RESB-RSPOS,
          RSART LIKE  RESB-RSART,
          AUFNR LIKE  RESB-AUFNR,
          VORAB LIKE  RESB-VORAB,
          XLOEK LIKE  RESB-XLOEK,
          XWAOK LIKE  RESB-XWAOK,
          POSTP LIKE  RESB-POSTP,
          MATNR LIKE  RESB-MATNR,
          BWART LIKE  RESB-BWART,
          WERKS LIKE  RESB-WERKS,
          MATKL LIKE  RESB-MATKL,
          MTART LIKE  MARA-MTART,
          PRDHA LIKE  MARA-PRDHA,
          AUART LIKE  AUFK-AUART,
          OBJNR LIKE  AUFK-OBJNR,
          VKORG LIKE  PMSDO-VKORG,
          VTWEG LIKE  PMSDO-VTWEG,
      END OF IT_RESB.

* internal table type QMEL
DATA:
  BEGIN OF IT_QMEL OCCURS 0,
      QMNUM TYPE QMNUM,
      QMART TYPE QMART,
      AUFNR TYPE AUFNR,
  END OF IT_QMEL.


DATA: LV_WHTYPE TYPE C.

DATA: BEGIN OF IT_MARA OCCURS 0,
         MATNR LIKE MARA-MATNR,
         MATKL LIKE MARA-MATKL,
         PRDHA LIKE MARA-PRDHA,
      END OF IT_MARA.


DATA: BEGIN OF IT_MARC OCCURS 0,
         MATNR LIKE MARC-MATNR,
         WERKS LIKE MARC-WERKS,
         PRCTR LIKE MARC-PRCTR,
         DISMM LIKE MARC-DISMM,
         EISBE LIKE MARC-EISBE,
      END OF IT_MARC.


DATA: BEGIN OF IT_MVKE OCCURS 0,
         MATNR LIKE MVKE-MATNR,
         VKORG LIKE MVKE-VKORG,
         MTPOS LIKE MVKE-MTPOS,
         MVGR4 LIKE MVKE-MVGR4,
      END OF IT_MVKE.

DATA: BEGIN OF IT_EORD OCCURS 0,
         MATNR LIKE EORD-MATNR,
         WERKS LIKE EORD-WERKS,
         LIFNR LIKE EORD-LIFNR,
         FLIFN LIKE EORD-FLIFN,
      END OF IT_EORD.

DATA: BEGIN OF IT_MBEW OCCURS 0,
         MATNR LIKE MBEW-MATNR,
         BWKEY LIKE MBEW-MATNR,
         STPRS LIKE MBEW-STPRS,
      END OF IT_MBEW.

DATA: BEGIN OF IT_VBEP OCCURS 0,
        VBELN LIKE VBEP-VBELN,
        POSNR LIKE VBEP-POSNR,
        ETTYP LIKE VBEP-ETTYP,
        EDATU LIKE VBEP-EDATU,
        WMENG LIKE VBEP-WMENG,
      END OF IT_VBEP.


DATA: BEGIN OF IT_MKPF OCCURS 0,
        MBLNR LIKE MKPF-MBLNR,
        MJAHR LIKE MKPF-MJAHR,
        XBLNR LIKE MKPF-XBLNR,
        BUDAT LIKE MKPF-BUDAT,
        BWART LIKE MSEG-BWART,
        SHKZG LIKE MSEG-SHKZG,
*        VBELV LIKE VBFA-VBELV,
        XSTBW LIKE T156-XSTBW,
      END OF IT_MKPF.

DATA: BEGIN OF IT_VBFA OCCURS 0,
        VBELN LIKE VBFA-VBELN,
        VBELV LIKE VBFA-VBELV,
        POSNV LIKE VBFA-POSNV,
      END OF IT_VBFA.

DATA: BEGIN OF IT_COMP OCCURS 0,
        RSNUM LIKE RESB-RSNUM,
        RSPOS LIKE RESB-RSPOS,
*>>>>>>>>> START OF INSERT MOD001
*        VBELN_ADV LIKE YSE_ADV_COMP_LIN-VBELN_ADV,
*        POSNR_ADV LIKE YSE_ADV_COMP_LIN-POSNR_ADV,
        VBELN_ADV LIKE VBAP-VBELN,
        POSNR_ADV LIKE VBAP-POSNR,
*>>>>>>>>> END OF INSERT MOD001
        SOBKZ LIKE RESB-SOBKZ,
      END OF IT_COMP.


TYPES: BEGIN OF GTY_KNA1,
        KUNNR TYPE KUNNR,
        NAME1 TYPE NAME1_GP,
       END OF GTY_KNA1,

       BEGIN OF GTY_VKBUR,
         VKBUR TYPE VKBUR,
         BEZEI TYPE BEZEI20,
       END OF GTY_VKBUR,

       BEGIN OF GTY_VKGRP,
         VKGRP TYPE VKGRP,
         BEZEI TYPE BEZEI20,
       END OF GTY_VKGRP,

       BEGIN OF GTY_VBKD,
         VBELN TYPE VBELN,
         POSNR TYPE POSNR,
         BZIRK TYPE BZIRK,
         BZTXT TYPE BZTXT,
       END OF GTY_VBKD,

       BEGIN OF GTY_VBFA,
         VBELV TYPE VBELN_VON,
         POSNV TYPE POSNR_VON,
         VBELN TYPE VBELN_NACH,
         POSNN TYPE POSNR_NACH,
       END OF GTY_VBFA,

       BEGIN OF GTY_LIPS,
         VBELN TYPE VBELN_VL,
         POSNR TYPE POSNR_VL,
         VGBEL TYPE VBELN,
         VGPOS TYPE POSNR,
         LFIMG TYPE LFIMG,
       END OF GTY_LIPS,

       BEGIN OF GTY_UUSTOCK,
         MATNR TYPE MATNR,
         WERKS TYPE WERKS_D,
         LGORT TYPE LGORT_D,
         LABST TYPE LABST,
       END OF GTY_UUSTOCK,

       BEGIN OF GTY_VBAP,
        VBELN  TYPE VBELN_VA,
        POSNR  TYPE POSNR_VA,
        MATNR  TYPE MATNR,
        KWMENG TYPE KWMENG,
        WERKS  TYPE WERKS_EXT,
        LGORT  TYPE LGORT_D,
        ABGRU  LIKE VBAP-ABGRU,
      END OF GTY_VBAP,

      BEGIN OF GTY_DEL,
        VBELV TYPE VBELN_VON,
        POSNV TYPE POSNR_VON,
        MATNR TYPE MATNR,
        LGORT TYPE LGORT_D,
        LFIMG TYPE LFIMG,
        WERKS TYPE WERKS_D,
      END OF GTY_DEL,

      BEGIN OF GTY_RESB,
        RSNUM LIKE RESB-RSNUM,
        RSPOS LIKE RESB-RSPOS,
        MATNR LIKE VBAP-MATNR,
        WERKS LIKE RESB-WERKS,
        LGORT LIKE RESB-LGORT,
        BDMNG LIKE RESB-BDMNG,
        ENMNG LIKE RESB-ENMNG,
        VMENG LIKE RESB-VMENG,
        UMREZ LIKE RESB-UMREZ,
        UMREN LIKE RESB-UMREN,
        XWAOK LIKE RESB-XWAOK,
      END OF GTY_RESB,

      BEGIN OF GTY_EBAN,
        BANFN LIKE EBAN-BANFN,
        BNFPO LIKE EBAN-BNFPO,
        MATNR LIKE EBAN-MATNR,
        RESWK LIKE EBAN-RESWK,
        MENGE LIKE EBAN-MENGE,
        LGORT LIKE EBAN-LGORT,
      END OF GTY_EBAN,

      BEGIN OF GTY_EKPO2,
        EBELN LIKE EKPO-EBELN,
        EBELP LIKE EKPO-EBELP,
        MATNR LIKE VBAP-MATNR,
        LGORT LIKE EKPO-LGORT,
        MENGE LIKE EKPO-MENGE,
        RESWK LIKE EKKO-RESWK,
      END OF GTY_EKPO2,

      BEGIN OF GTY_EKBE2,
        EBELN LIKE EKPO-EBELN,
        EBELP LIKE EKPO-EBELP,
        MATNR LIKE VBAP-MATNR,
        MENGE LIKE EKPO-MENGE,
        BELNR LIKE EKBE-BELNR,
        BWART LIKE EKBE-BWART,
        WERKS LIKE EKBE-WERKS,
      END OF GTY_EKBE2,

      BEGIN OF GTY_EKPO,
        EBELN LIKE EKPO-EBELN,
        EBELP LIKE EKPO-EBELP,
        MATNR LIKE VBAP-MATNR,
        WERKS LIKE EKPO-WERKS,
        LGORT LIKE EKPO-LGORT,
        MENGE LIKE EKPO-MENGE,
      END OF GTY_EKPO,

      BEGIN OF GTY_EKBE ,
        EBELN LIKE EKBE-EBELN,
        EBELP LIKE EKBE-EBELP,
        ZEKKN LIKE EKBE-ZEKKN,
        VGABE LIKE EKBE-VGABE,
        GJAHR LIKE EKBE-GJAHR,
        BELNR LIKE EKBE-BELNR,
        BUZEI LIKE EKBE-BUZEI,
        MATNR LIKE VBAP-MATNR,
        WERKS LIKE EKBE-WERKS,
        MENGE LIKE EKPO-MENGE,
        BWART LIKE EKBE-BWART,
      END OF GTY_EKBE.




DATA: GT_KNA1 TYPE STANDARD TABLE OF GTY_KNA1,
      GT_VKBUR TYPE STANDARD TABLE OF GTY_VKBUR,
      GT_VKGRP TYPE STANDARD TABLE OF GTY_VKGRP,
      GT_VBKD TYPE STANDARD TABLE OF GTY_VBKD,
      GT_VBFA TYPE STANDARD TABLE OF GTY_VBFA,
      GT_LIPS TYPE STANDARD TABLE OF GTY_LIPS,
      GT_UUSTOCK TYPE STANDARD TABLE OF GTY_UUSTOCK WITH KEY MATNR WERKS LGORT,
      GT_VBAP TYPE STANDARD TABLE OF GTY_VBAP,
      GT_DEL TYPE STANDARD TABLE OF GTY_DEL,
      GT_RESB TYPE STANDARD TABLE OF GTY_RESB,
      GT_EBAN TYPE STANDARD TABLE OF GTY_EBAN,
      GT_EKPO2 TYPE STANDARD TABLE OF GTY_EKPO2,
      GT_EKBE2 TYPE STANDARD TABLE OF GTY_EKBE2,
      GT_EKPO TYPE STANDARD TABLE OF GTY_EKPO,
      GT_EKBE TYPE STANDARD TABLE OF GTY_EKBE.


DATA: IT_TVAUT LIKE TVAUT OCCURS 0 WITH HEADER LINE.

DATA: R_LFGSA TYPE YSE_RANGE_LFGSA_T WITH HEADER LINE.

DATA: GV_COUNTER LIKE VBEP-ETENR VALUE 1.

*DATA: GV_LGORT TYPE LGORT_D.
RANGES: GR_LGORT FOR VBAP-LGORT.

FIELD-SYMBOLS: <FS_LIPS> TYPE GTY_LIPS,
               <FS_UUSTOCK> TYPE GTY_UUSTOCK.

FIELD-SYMBOLS:  <L_VBAK> LIKE LINE OF IT_VBAK,
                  <FS_KNA1> TYPE GTY_KNA1,
                  <FS_VKBUR> TYPE GTY_VKBUR,
                  <FS_VKGRP> TYPE GTY_VKGRP,
                  <FS_VBKD> TYPE GTY_VBKD,
                  <FS_VBAP> TYPE GTY_VBAP,
                  <FS_DEL> TYPE GTY_DEL,
                  <FS_RESB> TYPE GTY_RESB,
                  <FS_EBAN> TYPE GTY_EBAN,
                  <FS_EKPO2> TYPE GTY_EKPO2,
                  <FS_EKBE2> TYPE GTY_EKBE2,
                  <FS_EKPO> TYPE GTY_EKPO,
                  <FS_EKBE> TYPE GTY_EKBE.
